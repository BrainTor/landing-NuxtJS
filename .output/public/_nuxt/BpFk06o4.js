import{_ as m}from"./DIoAIqhh.js";import{a as u}from"./BimPEqV4.js";import{u as p}from"./CQZyZm_N.js";import{_ as f,c as o,a as e,b as r,w as b,f as w,r as v,o as c}from"./CXDA0QrK.js";const k={name:"find_tres",data(){return{win_number:-5,chest_count:3,chests:{},caps:{},is_clicked:!1,is_win:!1,chest:null,diamond:null,cap:null,startTime:0,endTime:0,local_ref:null,is_mobile:!1}},mounted(){this.is_mobile=window.innerWidth<700,this.startTime=new Date,localStorage.getItem("ref")!=null&&(this.local_ref=localStorage.getItem("ref")),this.generate_win_number(),this.chests.chest1=this.$refs.chest1,this.chests.chest2=this.$refs.chest2,this.chests.chest3=this.$refs.chest3,this.caps.cap1=this.$refs.cap1,this.caps.cap2=this.$refs.cap2,this.caps.cap3=this.$refs.cap3},methods:{generate_win_number(){this.win_number=Math.round(Math.random()*this.chest_count),this.win_number=this.win_number==0?1:this.win_number},click_button(s){this.is_clicked||(this.diamond=document.createElement("img"),this.diamond.setAttribute("id","diamond"),this.diamond.setAttribute("src",require("@/assets/img/diamond.png")),this.diamond.style=`
                width:30px;
                position:absolute;
                top:3%;
                left:42%;
                z-index:-1;
                `,this.chest=this.chests["chest"+this.win_number],this.chest.appendChild(this.diamond),this.cap=this.caps["cap"+s],this.cap.classList.add("rotated"),this.is_clicked=!0,this.win_number==s?(this.is_win=!0,this.$refs.title.innerText="Вам удалось отыскать верный сундук, нажмите 'Следующий уровень' и попытайте удачу на более сложном уровне"):this.$refs.title.innerText="Вы выбрали, неправельный сундук, повторите попытку")},new_lvl(){this.cap.classList.remove("rotated"),this.chest.removeChild(this.diamond),this.chest=null,this.diamond=null,this.cap=null,this.is_win=!1,this.is_clicked=!1,this.chest_count++,this.$refs.title.innerText="Попытайте удачу снова!",this.generate_win_number();let s=document.createElement("div");s.className="chest";let t="chest"+this.chest_count;this.chests[t]=s;let h=document.createElement("div");h.className="cap";let a="cap"+this.chest_count;this.caps[a]=h;let i=document.createElement("div");i.className="lock",this.caps[a].appendChild(i),this.chests[t].appendChild(this.caps[a]);let n=document.createElement("div");n.className="base",this.chests[t].appendChild(n),this.chests[t].addEventListener("click",()=>{this.click_button(this.chest_count-1)}),this.$refs.chest_row.appendChild(this.chests[t])},async send_location(s,t){u.post(`http://${this.$config.public.NUXT_APP_BACK_IP}:${this.$config.public.NUXT_APP_BACK_PORT}/send_location`,{location:"game_tres",referal:s,time:t})},updateMetaTags(){p({title:"Поиск сокровищ Silver-tech",meta:[{name:"description",content:"Игра по мотивам minecraft с элементами азарта, попробуйте сами!"},{name:"keywords",content:"minecraft, сундук из майнкрафта, игра, игра онлайн,маинкрафт,майнкрафт"}]})}},created(){this.updateMetaTags()},async beforeUnmount(){this.endTime=new Date;let s=Math.floor((this.endTime-this.startTime)/1e3);s=Math.floor(s/60)!=0?`Минут: ${Math.floor(s/60)}, Секунд: ${Math.floor(s%60)}`:`Секунд: ${Math.floor(s%60)}`,await this.send_location(this.local_ref,s)}},y={class:"main_container_game",style:{"justify-content":"space-around !important"}},g={style:{color:"whitesmoke","margin-bottom":"20px","text-align":"center"},class:"title_tres",ref:"title"},x={class:"chest_rows",style:{display:"flex","flex-wrap":"wrap",width:"100%","justify-content":"center"},ref:"chest_row"},C={class:"cap",ref:"cap1"},T={class:"cap",ref:"cap2"},$={class:"cap",ref:"cap3"},M={style:{display:"flex","justify-content":"center"}},N={class:"buttons"},E={key:0,class:"controll_button"},A={key:1,class:"controll_button"},P={key:0,class:"controll_button",onclick:"window.location.reload()"},B={key:1,class:"controll_button",onclick:"window.location.reload()"};function I(s,t,h,a,i,n){const d=v("fa"),_=m;return c(),o("div",y,[e("h2",g,"В одном из сундуков спрятан алмаз, постарайтесь его найти :)",512),e("div",x,[e("div",{class:"chest",ref:"chest1",onClick:t[0]||(t[0]=l=>this.click_button(1))},[e("div",C,t[5]||(t[5]=[e("div",{class:"lock"},null,-1)]),512),t[6]||(t[6]=e("div",{class:"base"},null,-1))],512),e("div",{class:"chest",ref:"chest2",onClick:t[1]||(t[1]=l=>this.click_button(2))},[e("div",T,t[7]||(t[7]=[e("div",{class:"lock"},null,-1)]),512),t[8]||(t[8]=e("div",{class:"base"},null,-1))],512),e("div",{class:"chest",ref:"chest3",onClick:t[2]||(t[2]=l=>this.click_button(3))},[e("div",$,t[9]||(t[9]=[e("div",{class:"lock"},null,-1)]),512),t[10]||(t[10]=e("div",{class:"base"},null,-1))],512)],512),e("div",M,[e("div",N,[r(_,{to:"/study"},{default:b(()=>[i.is_mobile?(c(),o("button",A,[r(d,{icon:"chevron-left"})])):(c(),o("button",E,"Вернуться назад"))]),_:1}),i.is_mobile?(c(),o("button",B,[r(d,{icon:"rotate-right"})])):(c(),o("button",P,"Перезапустить")),i.is_win&&!i.is_mobile?(c(),o("button",{key:2,class:"controll_button",onClick:t[3]||(t[3]=(...l)=>n.new_lvl&&n.new_lvl(...l))},"Следующий уровень")):i.is_win?(c(),o("button",{key:3,class:"controll_button",onClick:t[4]||(t[4]=(...l)=>n.new_lvl&&n.new_lvl(...l))},[r(d,{icon:"chevron-right"})])):w("",!0)])])])}const V=f(k,[["render",I],["__scopeId","data-v-3420c4f0"]]);export{V as default};
